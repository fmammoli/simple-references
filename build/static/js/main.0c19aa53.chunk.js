(this["webpackJsonpsimple-references"]=this["webpackJsonpsimple-references"]||[]).push([[0],{15:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(1),s=n.n(a),r=n(7),o=n.n(r),i=(n(15),n(9)),u=n(6),l=n.n(u),j=n(8),f=n(2);n(17);function d(e){var t=e.reference;console.log(t);var n=t.authors.flatMap((function(e){return"".concat(e.family.toUpperCase(),", ").concat(e.given)})).join("; ");return Object(c.jsx)("p",{children:"".concat(n,". ").concat(t.title,". ").concat(t.journal,", v. ").concat(t.volume,", n. ").concat(t.issue,", p. ").concat(t.pages,", ").concat(["jan","fev","mar","abr","maio","jun","jul","ago","set","out","nov","dez"][t.month-1],". ").concat(t.year,". Dispon\xedvel em: <").concat(t.available_at,">")})}function b(e,t){var n=s.a.useState(t),c=Object(f.a)(n,2),a=c[0],r=c[1],o=s.a.useState(e),i=Object(f.a)(o,2),u=i[0],d=i[1],b=s.a.useState(!1),p=Object(f.a)(b,2),h=p[0],O=p[1],g=s.a.useState(!1),m=Object(f.a)(g,2),v=m[0],x=m[1];function S(){return(S=Object(j.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return x(!1),O(!0),e.prev=4,e.next=7,fetch(t);case 7:return n=e.sent,e.next=10,n.json();case 10:c=e.sent,console.log("fetching"),r(c),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),x(!0);case 18:O(!1);case 19:case"end":return e.stop()}}),e,null,[[4,15]])})))).apply(this,arguments)}return s.a.useEffect((function(){console.log("to fetch"),function(e){S.apply(this,arguments)}(u)}),[u]),[{data:a,isLoading:h,isError:v},d]}function p(e){var t=e.setUrl,n=s.a.useState(""),a=Object(f.a)(n,2),r=a[0],o=a[1];return Object(c.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t("https://api.crossref.org/works/".concat(r)),o("")},children:[Object(c.jsx)("input",{type:"text",value:r,onChange:function(e){return o(e.target.value)}}),Object(c.jsx)("button",{type:"submit",children:"Search"})]})}var h=function(){var e=s.a.useState({references:[]}),t=Object(f.a)(e,2),n=t[0],a=t[1],r=b("",""),o=Object(f.a)(r,2),u=o[0],l=u.data,j=u.isLoading,h=u.isError,O=o[1];return s.a.useEffect((function(){if(console.log("efecting"),l){var e=function(e){return{authors:e.message.author,title:e.message.title[0],journal:e.message["container-title"][0],volume:e.message.volume,issue:e.message.issue,pages:e.message.page,month:e.message.issued["date-parts"][0][1],year:e.message.issued["date-parts"][0][0],available_at:e.message.URL}}(l);a((function(t){return console.log("Addins ".concat(e.title," to dataList")),{references:[e].concat(Object(i.a)(t.references))}}))}}),[l]),Object(c.jsxs)("main",{className:"App",children:[Object(c.jsx)("h1",{children:"Simple Reference"}),Object(c.jsxs)("section",{children:[Object(c.jsx)("p",{children:"Input a DOI and get a ABNT formatted reference."}),Object(c.jsx)("p",{children:"This uses CrossRef free and open API so be mindfull about the number of requests."}),Object(c.jsxs)("div",{children:[Object(c.jsx)("p",{children:"Here are some DOIs you can test:"}),Object(c.jsx)("div",{children:"https://doi.org/10.1590/S0104-59702015000200006"}),Object(c.jsx)("div",{children:"https://doi.org/10.1177/0306312717730428"})]}),Object(c.jsx)("p",{}),Object(c.jsx)("article",{children:Object(c.jsx)(p,{setUrl:O})})]}),Object(c.jsxs)("section",{children:[Object(c.jsx)("h2",{children:"Reference List"}),h&&Object(c.jsx)("div",{children:"Opps, DOI not found..."}),j&&Object(c.jsx)("div",{children:"Loading..."}),Object(c.jsx)("ul",{className:"left",children:n.references.map((function(e,t){return Object(c.jsx)(d,{reference:e},e.available_at)}))})]})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};o.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(h,{})}),document.getElementById("root")),O()}},[[18,1,2]]]);
//# sourceMappingURL=main.0c19aa53.chunk.js.map